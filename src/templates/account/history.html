{% extends "shared/layout.html" %}
{% block title %}History{% endblock %}
{% block additional_css %}
    <link href="/static/css/history.css" rel="stylesheet">
{% endblock %}

{% block additional_js %}
{% endblock %}

{% block main_content %}

    <!-- render the completions belonging to the user in a table -->
    <section id="history" class="mt-5">

        <div class="container">
            <div class="row">
                <div class="col-12 mx-auto text-center mt-5 pt-5 pb-3">
                    <h1 id="history-title">History</h1>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="text-center pt-4">
                <h4 class="mb-1">Every question you've ever asked is here.</h4>
                <p class="text-muted fw-light">(Best viewed in landscape on mobile devices)</p>
            </div>

            <div class="table-responsive px-sm-0 px-md-5 mb-5">
                {% if error %}
                    <div class="text-danger text-center">{{ error }}</div>
                {% else %}
                    <table class="table">
                        <thead>
                            <tr>
                                <th scope="col" style="width: 10%;">ID</th>
                                <th scope="col" style="width: 20%;">Prompt</th>
                                <th scope="col">Response</th>
                                <th scope="col" style="width: 5%;">Tokens Used</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for completion in completions %}
                                <tr>
                                    <td style="max-width: 50px; overflow-x: scroll;">{{ completion.completion_id }}</td>
                                    <td>{{ completion.prompt_text }}</td>
                                    <td>{{ completion.response_text }}</td>
                                    <td>{{ completion.total_tokens }}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                {% endif %}
            </div>
        </div>


    </section>


{% endblock %}
